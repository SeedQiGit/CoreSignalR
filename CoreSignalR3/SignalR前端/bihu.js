

var hubUrl = 'http://localhost:5009/bihuHub';
//var hubUrl = 'http://message2.91bihu.me/bihuHub';
//var hubUrl = 'https://botsignalr.91bihu.com/bihuHub';
//var hubUrl = 'http://192.168.5.247:5009/bihuHub';
//var hubUrl = 'http://localhost:5009/bihuHub';

var loginToken=
//"eyJhbGciOiJSUzI1NiIsImtpZCI6IjlDRDQ4NDI3QzVDMEJCMjBBQTU5NThGODcyQTFEODI2RjNCQUZEQzQiLCJ0eXAiOiJKV1QiLCJ4NXQiOiJuTlNFSjhYQXV5Q3FXVmo0Y3FIWUp2TzZfY1EifQ.eyJuYmYiOjE1NzY1NTE3MTMsImV4cCI6MTU3Nzg0NzcxMywiaXNzIjoiaHR0cDovL2lkZW50aXR5LjkxYmlodS5tZSIsImF1ZCI6WyJodHRwOi8vaWRlbnRpdHkuOTFiaWh1Lm1lL3Jlc291cmNlcyIsImNhcl9idXNpbmVzcyIsImVtcGxveWVlX2NlbnRlciJdLCJjbGllbnRfaWQiOiJhcHBDbGllbnQiLCJzdWIiOiIxNzI5NSIsImF1dGhfdGltZSI6MTU3NjU1MTcxMywiaWRwIjoibG9jYWwiLCJlbXBsb3llZUlkIjoiMTcyOTUiLCJjb21wSWQiOiIxNzI5NSIsInVzZXJOYW1lIjoi5rWL6K-V6buE5Zu95YevIiwidXNlckFjY291bnQiOiJoZ2swMSIsIkRlcHRJZCI6IjE4OSIsIklzQWRtaW4iOiJUcnVlIiwiUm9sZVR5cGUiOiIzIiwiUm9sZUlkcyI6Ijg0OTkzIiwibG9naW5DbGllbnRUeXBlIjoiMiIsImxvZ2luU3RhbXAiOiIxNTc2NTUxNzEzLWQ0NTEzZmYzLTBlYzMtNGNkZC1iZWI5LTcxNGRlYTE2MzgwZCIsInNjb3BlIjpbImNhcl9idXNpbmVzcyIsImVtcGxveWVlX2NlbnRlciJdLCJhbXIiOlsicHdkIl19.N1OW1Ip7wqAXmQfio8cy5rzq6bittV_fZQgfNMbyWBjXoZZDLGH5FlXwpijMlHSvBTMDyo7G82_pg8oia6oLKnEGcyHYpCK8g9qbhf5vSvCtvGXtvhUPfXUOcXi09lxYIByUNFTWoF9HJN5aJS2F1DCq03z34wUThABKoyrRdcjaBp6msGLF6MmjMr68Pyn6MxmNYDX55ltbbJN6SfdScduyoSGiFv2kkf3eO-2jim4PfSPu5ZvZWKOdGKRgBO3lQD9rAOTx6KjWP-sX6u5nZs9HquuqTNzeaAmGmxFURRiGQWL9hMu4qu7EOw_-Z-u5dg0nWzTLz4DYtnf-72wqcQ";
//"";
//"Epp55OJLxrthuLO5p67VhQ&access_token=eyJhbGciOiJSUzI1NiIsImtpZCI6IjlDRDQ4NDI3QzVDMEJCMjBBQTU5NThGODcyQTFEODI2RjNCQUZEQzQiLCJ0eXAiOiJKV1QiLCJ4NXQiOiJuTlNFSjhYQXV5Q3FXVmo0Y3FIWUp2TzZfY1EifQ.eyJuYmYiOjE1NzY0Njg2NjksImV4cCI6MTU3NjUwNDY2OSwiaXNzIjoiaHR0cDovL2lkZW50aXR5LjkxYmlodS5jb20iLCJhdWQiOlsiaHR0cDovL2lkZW50aXR5LjkxYmlodS5jb20vcmVzb3VyY2VzIiwiZW1wbG95ZWVfY2VudGVyIiwiY2FyX2J1c2luZXNzIiwiYnVzaW5lc3Nfc3RhdHMiXSwiY2xpZW50X2lkIjoid29yayIsInN1YiI6IjE2ODM4MyIsImF1dGhfdGltZSI6MTU3NjQ2ODY2OCwiaWRwIjoibG9jYWwiLCJuYW1lIjoi5rWL6K-V57uE6buE5Zu95YevIiwiZW1wbG95ZWVJZCI6IjE2ODM4MyIsImNvbXBJZCI6IjE2ODM4MyIsInVzZXJOYW1lIjoi5rWL6K-V57uE6buE5Zu95YevIiwidXNlckFjY291bnQiOiJiaWh1MDkiLCJEZXB0SWQiOiIyODEyIiwiSXNBZG1pbiI6IlRydWUiLCJSb2xlVHlwZSI6IjMiLCJSb2xlSWRzIjoiMzkzODkiLCJsb2dpbkNsaWVudFR5cGUiOiIxIiwibG9naW5TdGFtcCI6IjE1NzY0Njg2NjgtYjZlM2RiNzgtZWY2My00MWUxLWFlODItZTk4OTE0ZTMxZTYyIiwic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSIsImVtcGxveWVlX2NlbnRlciIsImNhcl9idXNpbmVzcyIsImJ1c2luZXNzX3N0YXRzIl0sImFtciI6WyJwd2QiXX0.DIoeMZfWCvI2CAkC1w3HgH_oHBUTejT8c6fw7X8J7pPSjMt2r0J_pFAajGFwxSnJJI3zLotUrT8GdL4zjywXbiW0sOxAvaMh_UJ0FLXTTqA-G0QGB4mXWDP6GAx3H1FQ-LEIc37Q-gvsCrlCNeDLQ42ZnVakrD9DucSuoPTIeB_IfS5PfWdcF0qBsrhPMKwjGsDp932iMJIlHIY8inOd3yyOdYa7qGMLKGPOjMyOG3bTowWjWdVKnzpF4xg81EB6FFIyB3e4RsmFJUGpqK0nJe8J5JOyjuLq5AsM96GaVbMdGx3MB7jl_SAiQWkhBscky2NLfM6RAKYTmNERQGruDQ";
//"eyJhbGciOiJSUzI1NiIsImtpZCI6IjlDRDQ4NDI3QzVDMEJCMjBBQTU5NThGODcyQTFEODI2RjNCQUZEQzQiLCJ0eXAiOiJKV1QiLCJ4NXQiOiJuTlNFSjhYQXV5Q3FXVmo0Y3FIWUp2TzZfY1EifQ.eyJuYmYiOjE1NzY1NTE3OTksImV4cCI6MTU3Nzg0Nzc5OSwiaXNzIjoiaHR0cHM6Ly9pZGVudGl0eS45MWJpaHUuY29tIiwiYXVkIjpbImh0dHBzOi8vaWRlbnRpdHkuOTFiaWh1LmNvbS9yZXNvdXJjZXMiLCJjYXJfYnVzaW5lc3MiLCJlbXBsb3llZV9jZW50ZXIiXSwiY2xpZW50X2lkIjoiYXBwQ2xpZW50Iiwic3ViIjoiMTA1NTIzIiwiYXV0aF90aW1lIjoxNTc2NTUxNzk5LCJpZHAiOiJsb2NhbCIsImVtcGxveWVlSWQiOiIxMDU1MjMiLCJjb21wSWQiOiIxMDU1MjMiLCJ1c2VyTmFtZSI6IueglOWPkea1i-ivlee6v-S4iui0puWPtyIsInVzZXJBY2NvdW50IjoidG9wMiIsIkRlcHRJZCI6IjE2NzkiLCJJc0FkbWluIjoiVHJ1ZSIsIlJvbGVUeXBlIjoiMyIsIlJvbGVJZHMiOiIxMTIyNCIsImxvZ2luQ2xpZW50VHlwZSI6IjIiLCJsb2dpblN0YW1wIjoiMTU3NjU1MTgwMC1jODRhZTZkYS05NTI5LTQyYzUtYjRjMy02ODRmOWM3NGZjNGIiLCJzY29wZSI6WyJjYXJfYnVzaW5lc3MiLCJlbXBsb3llZV9jZW50ZXIiXSwiYW1yIjpbInB3ZCJdfQ.J6yP3DX5ch4ExQBkFCyAkDFLqoZZkWgcKtozpYW1Ij498TsyHw_F5fSxVhNo9Zgl5J3Hjy39bSVsL_qnyZYZjcKohkrRW8_KaIFY205ES0VU7mBsRIoRkjwnTMYh_ecUDLUUTL9C8dK9tGX8dscpEqZabebrKz43jQ0UCfES-fdnb7n4LtOsNQ-qQyL7_DCPJ4hA4y-TH6CzOI-IyTocv4aWrSPfTPhxguME9nYxjEihZh4gXmm0lkqVTWkBwPdAhoXjZUE0hyCc_gqgL3ieC_jYhqz4scgQJMSPps4j9r0K41AocITTrwJeb1njzgqLcvobzYOGvjuYmqeWU9gZeg";
"eyJhbGciOiJSUzI1NiIsImtpZCI6IjlDRDQ4NDI3QzVDMEJCMjBBQTU5NThGODcyQTFEODI2RjNCQUZEQzQiLCJ0eXAiOiJKV1QiLCJ4NXQiOiJuTlNFSjhYQXV5Q3FXVmo0Y3FIWUp2TzZfY1EifQ.eyJuYmYiOjE1ODcxMTEzODIsImV4cCI6MTU4ODQwNzM4MiwiaXNzIjoiaHR0cDovL2lkZW50aXR5LjkxYmlodS5tZSIsImF1ZCI6WyJodHRwOi8vaWRlbnRpdHkuOTFiaWh1Lm1lL3Jlc291cmNlcyIsImNhcl9idXNpbmVzcyIsImVtcGxveWVlX2NlbnRlciJdLCJjbGllbnRfaWQiOiJhcHBDbGllbnQiLCJzdWIiOiIxMDIiLCJhdXRoX3RpbWUiOjE1ODcxMTEzODIsImlkcCI6ImxvY2FsIiwiZW1wbG95ZWVJZCI6IjEwMiIsImNvbXBJZCI6IjEwMiIsInVzZXJOYW1lIjoi6ams5bCP57-g6aG257qnIiwidXNlckFjY291bnQiOiJtYXhpYW9jdWkiLCJEZXB0SWQiOiIxIiwiSXNBZG1pbiI6IlRydWUiLCJSb2xlVHlwZSI6IjMiLCJSb2xlSWRzIjoiNTciLCJsb2dpbkNsaWVudFR5cGUiOiIyIiwibG9naW5TdGFtcCI6IjE1ODcxMTEzODMtNDYwODEwNWEtMTU4Ny00MGQ5LTllNDEtZDZjYzFkNzY4ZjcyIiwic2NvcGUiOlsiY2FyX2J1c2luZXNzIiwiZW1wbG95ZWVfY2VudGVyIl0sImFtciI6WyJwd2QiXX0.JOxeagdXnZeQ67hEnEc_lB8NTI0rpHVVYFcVOzoRRAG0q8ZbZs9s3mvBKGRvbLX7Rz_TdMkTD-CZiQnlT_m6-iEbAnsib2AtI0AJyHQrL69rNe_n5us6cZ7CyDnKBanyB5THwxMghu8ZwbGyXdqC2MBdpnL4jX5hTwM1w2Qc99TMtgmjltcv1ySwlhEX_Nr2WuYxfzRBrYPTGNTrGgSQjKxiWkUWK96NDNvQu5Fl7AAYCtAW9RXOWajQI2ZkWWCozpA0BooIZuhmNXGG8WtItU_LNU8tBAD4ooYU1cq9meU1KYCDy-8CT7pcx4KIQXcH9hy0pzIJqze-nSck8ixXVA";



var connection = new signalR.HubConnectionBuilder().withUrl(hubUrl,{ accessTokenFactory: () => loginToken }).build();

async function start() {
    try {
        await connection.start();
        console.log("connected");
    } catch (err) {
        console.log(err);
        setTimeout(() => start(), 5000);
    }
};

connection.onclose(async () => {
    await start();
});

connection.on("QuoteResultMessage", function (user) {
    var li = document.createElement("li");
    li.textContent = user;
    document.getElementById("messagesList").appendChild(li);
});

connection.start().then(function(){
    console.log("connecteded");
}).catch(function (err) {
    return console.error(err.toString());
});

